{{- $su := .Values.pg.superuser | default dict -}}
{{- if ($su.createSecret | default false) }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ $su.secretName | default (printf "%s-pg-root" (include "docker-homework-app.fullname" .)) }}
  namespace: {{ .Release.Namespace }}
  labels:
    app.kubernetes.io/name: {{ include "docker-homework-app.name" . }}
    app.kubernetes.io/instance: {{ .Release.Name }}
type: Opaque
stringData:
  {{ $su.passwordKey | default "password" }}: {{ $su.password | default "" | quote }}
{{- end }}
